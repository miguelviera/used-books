(this["webpackJsonpused-books"]=this["webpackJsonpused-books"]||[]).push([[0],{34:function(e,t,c){},36:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(25),s=c.n(a),o=(c(34),c(5)),i=c(4),l=c(7),u=Object(n.createContext)(null);function d(){return Object(n.useContext)(u)}var j=c(2),p=c.n(j),b=c(6),h="https://viera-used-books.herokuapp.com",m=function(){var e=Object(b.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/auth/signin/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/auth/signout/"),{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),f={isAuthenticated:function(){return"undefined"!=typeof window&&(!!sessionStorage.getItem("jwt")&&JSON.parse(sessionStorage.getItem("jwt")))},authenticate:function(e,t){"undefined"!==typeof window&&sessionStorage.setItem("jwt",JSON.stringify(e)),t()},clearJWT:function(e){"undefined"!==typeof window&&sessionStorage.removeItem("jwt"),e(),O().then((function(e){document.cookie="t=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}))},updateUser:function(e){if("undefined"!==typeof window&&sessionStorage.getItem("jwt")){var t=JSON.parse(sessionStorage.getItem("jwt"));t.user=e,sessionStorage.setItem("jwt",JSON.stringify(t))}}},x=(c(36),c(0)),v=function(){var e=Object(l.g)(),t=d(),c=t.itemTotal,n=t.isAuthenticated,r=t.userHasAuthenticated;return Object(x.jsx)("div",{className:"Header",children:Object(x.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top",children:[Object(x.jsx)(i.b,{className:"navbar-brand",to:"/",children:"UsedBooks"}),Object(x.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapse","aria-controls":"collapse","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),Object(x.jsxs)("div",{className:"collapse navbar-collapse",id:"collapse",children:[Object(x.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(x.jsx)("li",{className:"nav-item active",children:Object(x.jsx)(i.b,{className:"nav-link",to:"/",children:"Home"})}),n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{className:"nav-link",to:"/products/new",children:"New Product"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{className:"nav-link",to:"/products",children:"My Products"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{className:"nav-link",to:"/orders",children:"My Orders"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{className:"nav-link",to:"/profile",children:"My Profile"})})]})]}),Object(x.jsxs)("div",{className:"form-inline my-2 my-lg-0",children:[n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(i.b,{className:"btn btn-success mr-sm-2",to:"/cart",children:[Object(x.jsx)("i",{className:"fa fa-shopping-cart"})," Cart",Object(x.jsx)("span",{className:"badge badge-light",children:c})]}),Object(x.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",onClick:function(t){r(!1),f.clearJWT((function(){return e.push("/")}))},type:"submit",children:"SIGN OUT"})]}),!n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(i.b,{className:"btn btn-success mr-sm-2",to:"/signin",children:"SIGN IN"}),Object(x.jsx)(i.b,{className:"btn btn-success mr-sm-2",to:"/signup",children:"SIGN UP"})]})]})]})]})})},g=c(9),y=c(3),N=c(28),w=c(20),A=c.n(w),S=function(){var e=Object(b.a)(p.a.mark((function e(t,c,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(c.created=n),e.prev=1,e.next=4,fetch("".concat(h,"/api/products"),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+t.t},body:c});case 4:return r=e.sent,e.abrupt("return",r.json());case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("productId from function "+t),e.prev=1,e.next=4,fetch("".concat(h,"/api/products/")+t,{method:"GET"});case 4:return c=e.sent,e.abrupt("return",c.json());case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark((function e(t,c,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("productId "+t),e.prev=1,e.next=4,fetch("".concat(h,"/api/products/")+t,{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer "+n.t},body:c});case 4:return r=e.sent,e.abrupt("return",r.json());case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/products/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(p.a.mark((function e(t){var c,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=A.a.stringify(t),e.prev=1,e.next=4,fetch("".concat(h,"/api/products?").concat(c),{method:"GET"});case 4:return n=e.sent,e.abrupt("return",n.json());case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/products/categories"),{method:"GET"});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/cart/").concat(f.isAuthenticated().user._id,"/").concat(t),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+c.t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(p.a.mark((function e(t,c,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/cart/").concat(t,"/").concat(c),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/cart/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/cart/").concat(f.isAuthenticated().user._id,"/clearCart"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t}});case 3:return c=e.sent,e.abrupt("return",c.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/cart/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}();function F(e){var t=e.item,c=f.isAuthenticated(),r=d(),a=(r.itemTotal,r.setItemTotal),s=Object(n.useState)({}),i=Object(o.a)(s,2);i[0],i[1];return f.isAuthenticated()&&1==t.active&&Object(x.jsx)("button",{className:"btn btn-primary float-right",onClick:function(){_(t._id,{t:c.token}).then((function(e){a(e.total)}))},children:"Add to Card"})}var J=function(e){var t=e.product;return Object(x.jsxs)("div",{className:"VerticalCard card",children:[Object(x.jsx)(i.b,{to:"/products/".concat(t._id),children:Object(x.jsx)("img",{src:"http://localhost:3000/api/product/image/".concat(t._id),style:{height:"100%",width:"100%"},className:"card-img-top",alt:"..."})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title d-inline",children:t.name}),Object(x.jsxs)("p",{className:"card-text d-inline float-right",children:["$",t.price]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),f.isAuthenticated()&&t.owner!=f.isAuthenticated().user._id&&Object(x.jsx)(F,{item:t})]})]})},z=function(e){var t=e.products;return Object(x.jsx)("div",{className:"ProductList",children:Object(x.jsx)("div",{className:"row",children:t.filter((function(e){return e.createdBy!=(f.isAuthenticated()?f.isAuthenticated().user._id:"")})).map((function(e,t){return Object(x.jsx)("div",{className:"col-md-3",style:{marginBottom:"0.5em"},children:Object(x.jsx)(J,{product:e})},t)}))})})},H=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(o.a)(a,2),i=s[0],l=s[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),j=d[0],p=d[1],b=Object(n.useState)({category:"All",active:!0,search:""}),h=Object(o.a)(b,2),m=h[0],O=h[1];Object(n.useEffect)((function(){P().then((function(e){e.error?console.log(e.error):p(["All"].concat(Object(N.a)(e)))}))}),[]);var f=function(e){return function(t){t.preventDefault();var c="image"===e?t.target.files[0]:t.target.value;O(Object(y.a)(Object(y.a)({},m),{},Object(g.a)({},e,c))),l(!1)}};return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"ProductSearch card",style:{marginBottom:"1em"},children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("form",{className:"form-inline d-flex justify-content-center",role:"form",onSubmit:function(e){e.preventDefault(),E(m).then((function(e){e.error?console.log(e.error):(r(e),l(0===e.length))}))},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{className:"filter-col mr-sm-2",htmlFor:"category",children:"Category"}),Object(x.jsx)("select",{id:"category",className:"form-control mr-sm-2",value:m.category,onChange:f("category"),children:j.map((function(e,t){return Object(x.jsx)("option",{children:e},t)}))})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"text",className:"form-control input-sm mr-sm-2",value:m.search,onChange:f("search"),placeholder:"Search for Product Name",id:"pref-search"})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("button",{type:"submit",className:"btn btn-success mr-sm-2",children:"SEARCH"})})]})})}),0===c.length&&"All"===m.category?Object(x.jsx)("div",{className:"col-md-12",children:"Please, make your search"}):"",i&&"All"!==m.category?Object(x.jsx)("div",{className:"col-md-12",children:"No items found"}):"",Object(x.jsx)(z,{products:c})]})},G=function(){return Object(x.jsx)("div",{className:"Home",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-sm-12",children:Object(x.jsx)(H,{})})})})},U=function(){var e=Object(b.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/users/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(p.a.mark((function e(t,c,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("userId "+t),console.log("user "+JSON.stringify(n)),e.prev=2,e.next=5,fetch("".concat(h,"/api/users/")+t,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,c,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/users/").concat(t.userId),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,c){return e.apply(this,arguments)}}(),M=function(){var e=d().userHasAuthenticated,t=f.isAuthenticated(),c=Object(l.g)();return Object(x.jsx)("div",{className:"card col-md-4 mx-auto",children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("h4",{children:f.isAuthenticated().user.name}),Object(x.jsxs)("p",{className:"text-secondary mb-1 mt-3",children:["Email: ",f.isAuthenticated().user.email]}),Object(x.jsxs)("p",{className:"text-muted font-size-sm mt-3",children:["Joined: ",new Date(f.isAuthenticated().user.created).toDateString()]}),Object(x.jsx)(i.b,{className:"btn btn-primary",style:{marginRight:"5px"},to:"/profile/edit",children:"Edit"}),Object(x.jsx)("button",{className:"btn btn-danger",onClick:function(){R({userId:f.isAuthenticated().user._id},{t:t.token}).then((function(t){t&&t.error?console.log("data "+JSON.stringify(t)):(e(!1),f.clearJWT((function(){return c.push("/")})),c.push("/"))}))},children:"Delete"})]})})})})},Q=(c(56),function(){var e=f.isAuthenticated(),t=Object(l.g)(),c=Object(n.useState)({name:f.isAuthenticated().user.name,email:f.isAuthenticated().user.email,password:""}),r=Object(o.a)(c,2),a=r[0],s=r[1],i=function(e){return function(t){s(Object(y.a)(Object(y.a)({},a),{},Object(g.a)({},e,t.target.value)))}};return Object(x.jsxs)("div",{className:"card col-md-4 mx-auto",children:[Object(x.jsx)("hr",{className:"border-light m-0"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{className:"form-label",children:"Name"}),Object(x.jsx)("input",{type:"text",className:"form-control",value:a.name,onChange:i("name")})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{className:"form-label",children:"E-mail"}),Object(x.jsx)("input",{type:"text",className:"form-control mb-1",value:a.email,onChange:i("email")})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{className:"form-label",children:"Password"}),Object(x.jsx)("input",{type:"password",className:"form-control mb-1",value:a.password,onChange:i("password"),placeholder:"Password"})]}),Object(x.jsxs)("div",{className:"form-group text-right mt-3",children:[Object(x.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var c={name:a.name||void 0,email:a.email||void 0,password:a.password||void 0};L(f.isAuthenticated().user._id,{t:e.token},c).then((function(e){e&&e.error?s(Object(y.a)(Object(y.a)({},a),{},{error:e.error})):(f.updateUser(e),t.push("/profile"))}))},children:"Save changes"}),"\xa0",Object(x.jsx)("button",{type:"button",className:"btn btn-danger",children:"Cancel"})]})]}),a.error&&Object(x.jsx)("p",{children:a.error})]})}),W=function(){var e=Object(b.a)(p.a.mark((function e(t,c,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/orders"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t},body:JSON.stringify({products:n,user:t,total:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(p.a.mark((function e(t,c){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/order/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(p.a.mark((function e(t,c,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/api/orders/user/")+t.userId,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+c.t}});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),K=(c(57),function(){var e=d(),t=e.itemTotal,c=e.setItemTotal,r=f.isAuthenticated(),a=Object(l.g)(),s=Object(n.useState)([]),u=Object(o.a)(s,2),j=u[0],p=u[1],b=Object(n.useState)(!0),h=Object(o.a)(b,2),m=h[0],O=h[1];Object(n.useEffect)((function(){v()}),[]);var v=function(){D(f.isAuthenticated().user._id,{t:r.token}).then((function(e){p(e),O(e.length>0)}))},g=function(){for(var e=0,t=0;t<j.length;t++)e+=j[t].quantity*j[t].product.price;return e};return Object(x.jsx)("div",{className:"Card card col-md-12 col-lg-6",children:Object(x.jsxs)("div",{className:"col-sm-12",children:[Object(x.jsxs)("table",{className:"table table-hover",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{className:"text-center",children:"Price"}),Object(x.jsx)("th",{className:"text-center",children:"Total"}),Object(x.jsx)("th",{className:"text-center",children:"Actions"}),Object(x.jsx)("th",{children:" "})]})}),Object(x.jsx)("tbody",{children:j.map((function(e,n){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"col-sm-12",children:Object(x.jsxs)("div",{className:"media",children:[Object(x.jsxs)(i.b,{className:"thumbnail pull-left",to:"/products/".concat(e.product._id),children:[" ",Object(x.jsx)("img",{className:"media-object",alt:"",src:"http://localhost:3000/api/product/image/".concat(e.product._id),style:{width:"72px",height:"72px"}})," "]}),Object(x.jsxs)("div",{className:"media-body",children:[Object(x.jsx)("h4",{className:"media-heading",children:Object(x.jsx)("a",{href:"#"})}),Object(x.jsx)("span",{children:"Status: "}),Object(x.jsx)("span",{className:"text-warning",children:Object(x.jsx)("strong",{children:"In Stock"})})]})]})}),Object(x.jsx)("td",{className:"col-md-1 text-left",children:Object(x.jsx)("strong",{className:"label label-danger",children:e.product.name})}),Object(x.jsx)("td",{className:"col-sm-1 col-md-1",style:{textAlign:"center"},children:Object(x.jsx)("input",{type:"number",className:"form-control",min:"1",max:e.product.quantity,value:e.quantity,onChange:(s=n,function(e){var t=e.target.value,c=j.map((function(e){return e}));c[s].quantity=t,p(c),B(c[s]._id,t,{t:r.token}).then((function(e){}))})})}),Object(x.jsx)("td",{className:"col-sm-1 col-md-1 text-center",children:Object(x.jsx)("strong",{children:e.product.price})}),Object(x.jsx)("td",{className:"col-sm-1 col-md-1 text-center",children:Object(x.jsx)("strong",{children:e.product.price*e.quantity})}),Object(x.jsx)("td",{className:"col-sm-1 col-md-1",children:Object(x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(a=e._id,function(e){q(a,{t:r.token}).then((function(e){v(),c(t-1)}))}),children:"Remove"})})]},n);var a,s}))})]}),m&&Object(x.jsxs)("div",{className:"pull-right",children:[Object(x.jsx)("h3",{children:"Total"}),Object(x.jsx)("h3",{children:Object(x.jsx)("strong",{})}),Object(x.jsx)("h3",{children:Object(x.jsx)("strong",{children:g()})}),Object(x.jsxs)("button",{type:"button",className:"btn btn-success",onClick:function(e){return function(t){t.preventDefault(),W(f.isAuthenticated().user._id,{t:r.token},j,g()).then((function(t){t.error&&console.log(t.error),I({t:r.token}).then((function(t){e(0),a.push("/")}))}))}}(c),children:["Checkout ",Object(x.jsx)("span",{className:"fa fa-play"})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})]})})}),X=(c(58),function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],a=f.isAuthenticated();Object(n.useEffect)((function(){s()}),[]);var s=function(){$({userId:f.isAuthenticated().user._id},{t:a.token}).then((function(e){e.error?console.log(e.error):r(e)}))};return Object(x.jsxs)("table",{className:"Orders table table-bordered",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"#"}),Object(x.jsx)("th",{scope:"col",children:"Products"}),Object(x.jsx)("th",{scope:"col",children:"Total"}),Object(x.jsx)("th",{scope:"col",children:"Created"}),Object(x.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(x.jsx)("tbody",{children:c.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"row",children:t+1}),Object(x.jsx)("td",{children:e.products.map((function(e,t){return Object(x.jsx)("li",{style:{listStyle:"none"},children:Object(x.jsxs)(i.b,{to:"/products/".concat(e.product._id),children:[Object(x.jsxs)("h3",{children:[e.product.name," - Qt: ",e.quantity]},e._id),Object(x.jsx)("i",{className:"far fa-trash-alt"})]})},t)}))}),Object(x.jsx)("th",{scope:"row",children:e.total}),Object(x.jsx)("td",{children:new Date(e.created).toDateString()}),Object(x.jsx)("td",{children:Object(x.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:function(){return t=e._id,void V(t,{t:a.token}).then((function(e){e.error&&console.log(e.error),s()}));var t},children:["Remove",Object(x.jsx)("i",{className:"far fa-trash-alt"})]})})]},t)}))})]})}),Y=(c(59),function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],a=f.isAuthenticated();Object(n.useEffect)((function(){s()}),[]);var s=function(){E({createdBy:f.isAuthenticated().user._id}).then((function(e){e.error?console.log(e.error):r(e)}))};return Object(x.jsxs)("table",{className:"Products table table-bordered",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"#"}),Object(x.jsx)("th",{scope:"col",children:"Pricture"}),Object(x.jsx)("th",{scope:"col",children:"Name"}),Object(x.jsx)("th",{scope:"col",children:"Description"}),Object(x.jsx)("th",{scope:"col",children:"Category"}),Object(x.jsx)("th",{scope:"col",children:"Quantity"}),Object(x.jsx)("th",{scope:"col",children:"Price"}),Object(x.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(x.jsx)("tbody",{children:c.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"row",children:t+1}),Object(x.jsxs)("td",{children:[Object(x.jsx)("img",{style:{width:"4em"},src:"http://localhost:3000/api/product/image/".concat(e._id),className:"card-img-top",alt:"..."})," "]}),Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:e.description}),Object(x.jsx)("td",{children:e.category}),Object(x.jsx)("td",{children:e.quantity}),Object(x.jsx)("td",{children:e.price}),Object(x.jsxs)("td",{children:[Object(x.jsxs)(i.b,{type:"button",className:"btn btn-success mr-sm-2",to:"/products/edit/".concat(e._id),children:["Edit",Object(x.jsx)("i",{className:"far fa-trash-alt"})]}),Object(x.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:function(){return t=e._id,void T(t,{t:a.token}).then((function(e){s()}));var t},children:["Remove",Object(x.jsx)("i",{className:"far fa-trash-alt"})]})]})]},t)}))})]})}),Z=(c(60),function(e){var t=e.id,c=Object(n.useState)({}),r=Object(o.a)(c,2),a=r[0],s=r[1];return Object(n.useEffect)((function(){k(t).then((function(e){e.error?console.log(e.error):s(e)}))}),[t]),Object(x.jsxs)("div",{className:"VerticalCard card",style:{width:"20em"},children:[Object(x.jsx)(i.b,{to:"/products/".concat(a._id),children:a._id?Object(x.jsx)("img",{src:"http://localhost:3000/api/product/image/".concat(a._id),style:{height:"100%",width:"100%"},className:"card-img-top",alt:"..."}):Object(x.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("p",{className:"card-text",children:["Category: ",a.category]}),Object(x.jsx)("p",{className:"card-text",children:a.quantity>0?"In Stock":"Out of Stock"}),Object(x.jsx)("h5",{className:"card-title d-inline",children:a.name}),Object(x.jsxs)("p",{className:"card-text d-inline float-right",children:["$",a.price]}),Object(x.jsx)("p",{className:"card-text",children:a.description}),Object(x.jsx)(F,{item:a})]})]})}),ee=function(){var e=Object(l.h)().id;return Object(x.jsx)("div",{className:"Product",children:Object(x.jsx)(Z,{id:e})})},te=function(e){var t=e.values,c=e.clickSubmit,n=e.handleChange,r=e.categories;return Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("form",{onSubmit:c,children:[Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"file",accept:"image/*",className:"form-control-file",placeholder:"Select Picture",onChange:n("image"),required:!0})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",value:t.name,onChange:n("name"),required:!0})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Description",value:t.description,onChange:n("description"),required:!0})}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"category",children:"Category"}),Object(x.jsxs)("select",{className:"form-control",name:"category",value:t.category,onChange:n("category"),required:!0,children:[r.map((function(e,t){return Object(x.jsx)("option",{value:e,children:e},t)})),Object(x.jsx)("option",{value:"notFound",children:"Not found"})]})]}),"notFound"===t.category&&Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"New Category",value:t.new_category,onChange:n("new_category"),required:!0}),Object(x.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Fill this field with new category if not found!"})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Quantity",value:t.quantity,onChange:n("quantity"),required:!0})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"number",className:"form-control",min:"0",placeholder:"Price",value:t.price,onChange:n("price"),required:!0})}),Object(x.jsx)("hr",{}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mb-2 pull-right",children:"Submit"})]})})},ce=(c(61),function(){var e=f.isAuthenticated(),t=Object(n.useState)([]),c=Object(o.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)({name:"",description:"",image:"",category:"",quantity:"",price:"",new_category:"",createdBy:f.isAuthenticated().user._id,redirect:!1,error:""}),i=Object(o.a)(s,2),u=i[0],d=i[1],j=Object(n.useState)({new_category:"",value:""}),p=Object(o.a)(j,2);p[0],p[1];Object(n.useEffect)((function(){P().then((function(e){e.error?console.log(e.error):(0===e.length&&d(Object(y.a)(Object(y.a)({},u),{},{category:"notFound"})),a(e))}))}),[]);if(u.redirect)return Object(x.jsx)(l.a,{to:"/products"});return Object(x.jsxs)("div",{className:"NewProduct card ",style:{width:"30em"},children:[Object(x.jsx)("div",{className:"card-header",children:"New Product Information"}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)(te,{values:u,handleChange:function(e){return function(t){var c="image"===e?t.target.files[0]:t.target.value;d(Object(y.a)(Object(y.a)({},u),{},Object(g.a)({},e,c)))}},clickSubmit:function(t){t.preventDefault();var c=new FormData;u.name&&c.append("name",u.name),u.description&&c.append("description",u.description),u.image&&c.append("image",u.image),u.category&&c.append("category","notFound"===u.category?u.new_category:u.category),u.quantity&&c.append("quantity",u.quantity),u.price&&c.append("price",u.price),u.createdBy&&c.append("createdBy",u.createdBy),S({t:e.token},c).then((function(e){e.error?d(Object(y.a)(Object(y.a)({},u),{},{error:e.error})):d(Object(y.a)(Object(y.a)({},u),{},{error:"",redirect:!0}))}))},categories:r})})]})}),ne=(c(62),function(){var e=f.isAuthenticated(),t=Object(l.g)(),c=Object(l.h)().id,r=Object(n.useState)([]),a=Object(o.a)(r,2),s=a[0],i=a[1],u=Object(n.useState)({name:"",description:"",image:"",category:"",quantity:"",price:"",createdBy:"121212",redirect:!1,error:""}),d=Object(o.a)(u,2),j=d[0],p=d[1];Object(n.useEffect)((function(){k(c).then((function(e){e.error?console.log(e.error):(console.log("created "+JSON.stringify(e)),p(e))})),P().then((function(e){e.error?console.log(e.error):i(e)}))}),[c]);return Object(x.jsxs)("div",{className:"NewProduct card ",style:{width:"30em"},children:[Object(x.jsx)("div",{className:"card-header",children:"Edit Product Information"}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)(te,{values:j,handleChange:function(e){return function(t){var c="image"===e?t.target.files[0]:t.target.value;p(Object(y.a)(Object(y.a)({},j),{},Object(g.a)({},e,c)))}},clickSubmit:function(n){n.preventDefault();var r=new FormData;j.name&&r.append("name",j.name),j.description&&r.append("description",j.description),j.image&&r.append("image",j.image),j.category&&r.append("category",j.category),j.quantity&&r.append("quantity",j.quantity),j.price&&r.append("price",j.price),j.createdBy&&r.append("createdBy",j.createdBy),C(c,r,{t:e.token}).then((function(e){e.error?p(Object(y.a)(Object(y.a)({},j),{},{error:e.error})):t.push("/products")}))},categories:s})})]})});c(63);function re(){var e=d(),t=(e.isAuthenticated,e.userHasAuthenticated),c=e.setItemTotal,r=f.isAuthenticated(),a=Object(l.g)(),s=Object(n.useState)({email:"",password:"",error:"",redirectToReferrer:!1}),i=Object(o.a)(s,2),u=i[0],j=i[1],p=function(e){return function(t){j(Object(y.a)(Object(y.a)({},u),{},Object(g.a)({},e,t.target.value)))}};return Object(x.jsx)("div",{className:"Signin",children:Object(x.jsxs)("form",{className:"form-signin",onSubmit:function(e){e.preventDefault();var n={email:u.email||void 0,password:u.password||void 0};m(n).then((function(e){e.error?j(Object(y.a)(Object(y.a)({},u),{},{error:e.error})):f.authenticate(e,(function(){t(!0),D(f.isAuthenticated().user._id,{t:r.token}).then((function(e){c(e.length),a.push("/")}))}))}))},children:[Object(x.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Sign In"}),Object(x.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Email",value:u.email,onChange:p("email"),required:!0,autoFocus:!0}),Object(x.jsx)("input",{type:"password",id:"password",className:"form-control",value:u.password,onChange:p("password"),placeholder:"Password",required:!0}),Object(x.jsx)("br",{})," ",u.error&&Object(x.jsx)("p",{children:u.error}),Object(x.jsx)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign in"})]})})}c(64);var ae=function(){var e=Object(l.g)(),t=Object(n.useState)({name:"",password:"",email:"",open:!1,error:""}),c=Object(o.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){}),[]);var s=function(e){return function(t){a(Object(y.a)(Object(y.a)({},r),{},Object(g.a)({},e,t.target.value)))}};return Object(x.jsx)("div",{className:"Signup",children:Object(x.jsxs)("form",{className:"form-signup text-center",onSubmit:function(t){t.preventDefault();var c={name:r.name||void 0,email:r.email||void 0,password:r.password||void 0};U(c).then((function(t){t.error?a(Object(y.a)(Object(y.a)({},r),{},{error:t.error})):(a(Object(y.a)(Object(y.a)({},r),{},{error:"",open:!0})),e.push("/signin"))}))},children:[Object(x.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Sign up"}),Object(x.jsx)("input",{type:"text",id:"name",className:"form-control resetBottomBorder",value:r.name,onChange:s("name"),placeholder:"Name",required:!0,autoFocus:!0}),Object(x.jsx)("input",{type:"email",id:"email",className:"form-control resetBorder",value:r.email,onChange:s("email"),placeholder:"Email",required:!0,autoFocus:!0}),Object(x.jsx)("input",{type:"password",id:"password",className:"form-control",value:r.password,onChange:s("password"),placeholder:"Password",required:!0,autoFocus:!0}),Object(x.jsx)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign up"}),r.error&&Object(x.jsx)("p",{className:"mt-5 mb-3",style:{color:"red"},children:r.error})]})})},se=c(29),oe=function(e){var t=e.component,c=Object(se.a)(e,["component"]);return Object(x.jsx)(l.b,Object(y.a)(Object(y.a)({},c),{},{render:function(e){return f.isAuthenticated()?Object(x.jsx)(t,Object(y.a)({},e)):Object(x.jsx)(l.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))};var ie=function(){return Object(x.jsxs)("div",{className:"Home",children:[Object(x.jsx)(v,{}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/",component:G}),Object(x.jsx)(oe,{exact:!0,path:"/cart",component:K}),Object(x.jsx)(l.b,{exact:!0,path:"/signin",component:re}),Object(x.jsx)(l.b,{exact:!0,path:"/signup",component:ae}),Object(x.jsx)(oe,{exact:!0,path:"/profile",component:M}),Object(x.jsx)(oe,{exact:!0,path:"/profile/edit",component:Q}),Object(x.jsx)(oe,{exact:!0,path:"/orders",component:X}),Object(x.jsx)(oe,{path:"/products/new",component:ce}),Object(x.jsx)(oe,{exact:!0,path:"/products/edit/:id",component:ne}),Object(x.jsx)(l.b,{exact:!0,path:"/products/:id",component:ee}),Object(x.jsx)(oe,{exact:!0,path:"/products",component:Y})]})})]})};var le=function(){var e=f.isAuthenticated(),t=Object(n.useState)(f.isAuthenticated()),c=Object(o.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(0),l=Object(o.a)(s,2),d=l[0],j=l[1];return Object(n.useEffect)((function(){f.isAuthenticated()&&D(f.isAuthenticated().user._id,{t:e.token}).then((function(e){j(e.length)}))}),[]),Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(i.a,{children:Object(x.jsx)(u.Provider,{value:{itemTotal:d,setItemTotal:j,isAuthenticated:r,userHasAuthenticated:a},children:Object(x.jsx)(ie,{})})})})},ue=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,66)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(le,{})}),document.getElementById("root")),ue()}},[[65,1,2]]]);
//# sourceMappingURL=main.0ca97c41.chunk.js.map